---
layout: post
title: ìš°ì•„í•œ í…Œí¬ ì½”ìŠ¤ level 2-2 ì§€í•˜ì²  ë…¸ì„ ë„ ë¯¸ì…˜ íšŒê³  ë° í•™ìŠµ í”„ë¡œí•„
date: 2021-05-22 20:50:00 +0900
description: atdd subway í•™ìŠµ í”„ë¡œí•„, íšŒê³ 
img: woowacourse.png
tags: spring study
---

# ì™€ì¼ë”ì˜ í•™ìŠµ í”„ë¡œí•„ ğŸƒ

atdd-subway-map ë¯¸ì…˜ì„ í•˜ë©´ì„œ ìƒˆë¡­ê²Œ í•™ìŠµí•œ ë‚´ìš©ì„ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.

## [TDD] ì¸ìˆ˜ í…ŒìŠ¤íŠ¸ (Acceptance Test Driven Development) - 5

### ë‚´ìš©

- ì‹œìŠ¤í…œì´ ì‹¤ì œ ìš´ì˜ í™˜ê²½ì—ì„œ ì‚¬ìš©ë  ì¤€ë¹„ê°€ ë˜ì—ˆëŠ”ì§€ ìµœì¢…ì ìœ¼ë¡œ í™•ì¸í•˜ëŠ” í…ŒìŠ¤íŠ¸ ë‹¨ê³„ë‹¤.

  - ì˜ˆìƒëŒ€ë¡œ ì‹œìŠ¤í…œì´ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤.

- ì‹œìŠ¤í…œì˜ ì¸ìˆ˜ë¥¼ ìœ„í•´ ìš”êµ¬ì‚¬í•­ì„ ì‚¬ìš©ìê°€ ì§ì ‘ í…ŒìŠ¤íŠ¸í•˜ì—¬ ê°œë°œì´ ì™„ë£Œë˜ì—ˆìŒì„ ì¦ëª…í•˜ëŠ” í…ŒìŠ¤íŠ¸ë‹¤.

- ì¸ìˆ˜ í…ŒìŠ¤íŠ¸ ëª©ì 

  >í™•ì‹ , ë°°í¬ê°€ëŠ¥ì„± í‰ê°€, ì¤€ìˆ˜ì„± í™•ì¸, í”¼ë“œë°±

### ë§í¬

- [ê³ ê°ì´ í™•ì¸í•˜ëŠ” ì¸ìˆ˜ í…ŒìŠ¤íŠ¸](https://needjarvis.tistory.com/446)



## [TDD] ì¢…ë‹¨ ê°„ í…ŒìŠ¤íŠ¸ (End to End Test) - 5

### ë‚´ìš©

- ì‹œìŠ¤í…œì´ ì™¸ë¶€ ìš”êµ¬ì‚¬í•­ì„ ì¶©ì¡±í•˜ë©° ì „ì²´ ì‹œìŠ¤í…œì„ ëê¹Œì§€ í…ŒìŠ¤íŠ¸í•´ì„œ ëª©í‘œë¥¼ ë‹¬ì„±í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤.
- ë‹¤ë¥¸ í…ŒìŠ¤íŠ¸ì™€ ë‹¤ë¥´ê²Œ ì»´í¬ë„ŒíŠ¸, ì•„í‚¤í…ì³ì— ê´€ê³„ ì—†ì´ ì‹œìŠ¤í…œì´ ì „ì²´ì ìœ¼ë¡œ ë¹„ì§€ë‹ˆìŠ¤ ëª©í‘œë¥¼ ì¶©ì¡±í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ”ë° ì§‘ì¤‘í•œë‹¤.
- ë¸”ë™ë°•ìŠ¤ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•œë‹¤.
  - ë‚´ë¶€ ì„¤ê³„ëŠ” ê³ ë ¤í•˜ì§€ ì•ŠëŠ”ë‹¤.
  - ìš”êµ¬ì‚¬í•­ ë° ê¸°ëŠ¥ì„±ì— ê¸°ë°˜í•´ì„œ ì´ë£¨ì–´ì§„ë‹¤.

### ë§í¬

- [DevOps : End-to-End Test ê°œë…, ì¢…ë¥˜, ë°©ë²•](https://jjeongil.tistory.com/899)
- [í…ŒìŠ¤íŒ…ì˜ ì¢…ë¥˜](https://ipex.tistory.com/entry/QA%ED%85%8C%EC%8A%A4%ED%8C%85%EC%9D%98-%EC%A2%85%EB%A5%98)



## [TDD] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (Unit Test) - 2

ëª¨ë“ˆ(í”„ë¡œê·¸ë¨ì˜ ê¸°ë³¸ ë‹¨ìœ„) í…ŒìŠ¤íŠ¸

### ë‚´ìš©

- êµ¬í˜„ ë‹¨ê³„ì—ì„œ ê° ëª¨ë“ˆì„ ê°œë°œí•œ ë’¤ ëª…ì„¸ì— ë§ê²Œ ê°œë°œì´ ë˜ì—ˆëŠ” ì§€ í™•ì¸í•œë‹¤.
- ë‚´ë¶€ êµ¬ì¡°ë¥¼ ëª¨ë‘ í™•ì¸ ê°€ëŠ¥í•œ 'í™”ì´íŠ¸ ë°•ìŠ¤'í…ŒìŠ¤íŒ…ì„ ìˆ˜í–‰í•œë‹¤.
- íŠ¹ì • ëª¨ë“ˆ í…ŒìŠ¤íŠ¸ ìˆ˜í–‰ ì‹œ í•´ë‹¹ ëª¨ë“ˆê³¼ ë§ë¬¼ë¦¬ëŠ” ìƒìœ„/í•˜ìœ„ ëª¨ë¸ì´ í•„ìš”í•  ìˆ˜ ìˆë‹¤.

### ë§í¬

[[Terms] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸, ì¸ìˆ˜í…ŒìŠ¤íŠ¸, í†µí•©í…ŒìŠ¤íŠ¸ ë€?](https://m.blog.naver.com/tjdus25/221661896783)



## [TDD] í†µí•© í…ŒìŠ¤íŠ¸ (Integrate Test) - 2

### ë‚´ìš©

- ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ê°€ ëë‚œ ëª¨ë“ˆì„ í†µí•©í•˜ëŠ” ê³¼ì •ì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ë²„ê·¸ë¥¼ ì°¾ëŠ” í…ŒìŠ¤íŠ¸ë‹¤.
- ëª¨ë“ˆê°„ì˜ ìƒí˜¸ì‘ìš©ì„ í™•ì¸í•˜ëŠ” ê²ƒì´ ì£¼ëª©ì ì´ë‹¤.

### ë§í¬

- [í†µí•©í…ŒìŠ¤íŠ¸ë€ ë¬´ì—‡ì¸ê°€ìš”?](http://support.suresofttech.com/ko/support/solutions/articles/5000760844-%ED%86%B5%ED%95%A9%ED%85%8C%EC%8A%A4%ED%8A%B8%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80%EC%9A%94-)



## [Spring] @Transactional - 4

### ë‚´ìš©

íŠ¸ëœì­ì…˜

- ì—¬ëŸ¬ ê³¼ì •ì„ í•˜ë‚˜ì˜ í–‰ìœ„ë¡œ ë¬¶ì„ ë•Œ ì‚¬ìš©í•œë‹¤.

- ì—¬ëŸ¬ ë‹¨ê³„ë¥¼ ìˆ˜í–‰í–ˆì„ ë•Œ í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨í•˜ë©´ ëª¨ë‘ ì·¨ì†Œí•œë‹¤. (ë°ì´í„° ë¬´ê²°ì„± ë³´ì¥)

- Service ë ˆì´ì–´ì—ì„œ ì ìš©í–ˆë‹¤.

  ```java
  @RequiredArgsConstructor
  @Transactional(readOnly = true)
  @Service
  public class LineService {
  	...
  }
  ```

### ë§í¬

- [Spring íŠ¸ëœì­ì…˜ì— ëŒ€í•´ ì•Œì•„ë³´ì](https://flowarc.tistory.com/entry/Spring-%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98%EC%97%90-%EB%8C%80%ED%95%B4-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90)



## [Spring] @Valid & BindingResult - 4

### ë‚´ìš©

<b>valid</b>

- Api Controller ì—ì„œ ê°„í¸í•˜ê²Œ ë°ì´í„° ê²€ì¦ì„ í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í–ˆë‹¤.

- ë³„ë„ì˜ ì˜ì¡´ì„± ì¶”ê°€ê°€ í•„ìš”í•˜ë‹¤.

  ```java
  dependencies {
  	implementation 'org.springframework.boot:spring-boot-starter-validation'
  }
  ```

- @Range, @NotNull, @Size, @Positive ë“±ì˜ ì• ë„ˆí…Œì´ì…˜ ê²€ì¦ì´ ê°€ëŠ¥í•˜ë‹¤.

  ```java
      @InitBinder("lineRequest") // Custom Validator ë¥¼ ë“±ë¡í•œë‹¤.
      private void initBind(WebDataBinder webDataBinder) {
          webDataBinder.addValidators(new LineValidator());
      }
  
      @PostMapping
      public ResponseEntity<LineResponse> createLine(@RequestBody @Valid LineRequest lineRequest, BindingResult bindingResult) {
          if (bindingResult.hasErrors()) {
              throw new InsufficientLineInformationException();
          }
  
          Station upStation = stationService.find(lineRequest.getUpStationId());
          Station downStation = stationService.find(lineRequest.getDownStationId());
  
          Line line = lineService.create(lineRequest, upStation, downStation);
          LineResponse lineResponse = LineResponse.of(line);
          return ResponseEntity.created(URI.create("/lines/" + line.getId())).body(lineResponse);
      }
  ```

  ```java
  public class LineValidator implements Validator {
      @Override
      public boolean supports(Class<?> clazz) {
          return LineRequest.class.isAssignableFrom(clazz);
      }
  
      @Override
      public void validate(Object target, Errors errors) {
          LineRequest lineRequest = (LineRequest) target;
  
          if (Objects.isNull(lineRequest.getUpStationId()) || Objects.isNull(lineRequest.getDownStationId())) {
              throw new InsufficientLineInformationException();
          }
  
          if (lineRequest.getDownStationId().equals(lineRequest.getUpStationId())) {
              errors.rejectValue("downStationId", "duplicatedStation", "ì¤‘ë³µëœ ì—­ì…ë‹ˆë‹¤.");
          }
      }
  }
  ```

<b>BindingResult</b>

- validator ë¥¼ ìƒì†ë°›ëŠ” í´ë˜ìŠ¤ì—ì„œ ê°ì²´ ê°’ì„ ê²€ì¦í•˜ëŠ” ë°©ì‹ì´ë‹¤.
- hibernate-validator ê°€ ì•„ë‹Œ validation-api ë¼ì´ë¸ŒëŸ¬ë¥¼ ì‚¬ìš©í•œë‹¤.

### ë§í¬

- [ìŠ¤í”„ë§ ë°ì´í„° ê²€ì¦ @Valid, BindingResult](https://parkwonhui.github.io/spring/2019/04/22/spring-valid-bindingresult.html)
- [ìœ íš¨ì„± ê²€ì‚¬](https://www.notion.so/f478a32a8c704aed823f4bd7b6d34a75)



## [JDBC] RowMapper & BeanPropertyRowMapper - 3

### ë‚´ìš©

<b>RowMapper</b>

- SELECT ì¿¼ë¦¬ë¡œ ì¡°íšŒí•œ ê²°ê³¼ë¥¼ ì‚¬ìš©ìê°€ ì›í•˜ëŠ” í˜•íƒœë¡œ ì—¬ëŸ¬ ê°œì˜ ê°’ì„ ë°˜í™˜í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•´ì£¼ëŠ” ê°ì²´ë‹¤.

- queryForObject ë¥¼ í†µí•´ ê°ì²´ë¡œë„ ë°˜í™˜ì´ ê°€ëŠ¥í•´ì§„ë‹¤.

  ```java
      private RowMapper getRowMapper() {
          return (rs, rowNum) -> {
              Long id = rs.getLong("id");
              String name = rs.getString("name");
              String color = rs.getString("color");
              return Line.of(id, name, color);
          };
      }
  ```

<b>BeanPropertyRowMapper</b>

- ëª¨ë“  Bean Property ë¥¼ ë‹´ì•„ì£¼ëŠ” RowMapper ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•´ ì£¼ëŠ” ê°ì²´ë‹¤.

  ```java
      private final RowMapper rowMapper;
  
      public JdbcLineDao() {
          this.rowMapper = new BeanPropertyRowMapper(Line.class);
      }
  ```

- ë‹¤ë§Œ ìœ„ì˜ í´ë˜ìŠ¤ë¡œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ê²½ìš° Line.class ì— Setter, NoArgsConstructor ê°€ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— ì‚¬ìš©í•˜ì§€ ì•Šì•˜ë‹¤.

### ë§í¬

- [RowMapperì— ëŒ€í•´](https://velog.io/@seculoper235/RowMapper%EC%97%90-%EB%8C%80%ED%95%B4)



## [TDD] RestAssured - 5

### ë‚´ìš©

- Spring Framework Test í´ë˜ìŠ¤ ì¤‘ í•˜ë‚˜ì¸ MockMvc ì™€ ë‹¤ë¥´ê²Œ ì§ì ‘ ì˜ì¡´ì„±ì„ ì¶”ê°€í•´ì•¼ í•œë‹¤.

  ```java
  // build.gradle
  dependencies {
  	testImplementation 'io.rest-assured:rest-assured:3.3.0'
  }
  ```

- @SpringBootTest ë¡œ ë“±ë¡ëœ Spring Bean ì„ ì „ë¶€ ë¡œë“œí•œ ë’¤ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ê¸° ë•Œë¬¸ì— ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦°ë‹¤.

- Presentation Layer ì™¸ì˜ Bean ì„ ë‹¤ìˆ˜ ì‚¬ìš©í•  ë•Œ, MockMvc í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ëŠ” ê²ƒë³´ë‹¤ ë¹„ìš©ë³´ë‹¤ ì ê²Œ ì†Œëª¨ëœë‹¤.

- BDD ìŠ¤íƒ€ì¼ë¡œ ì‘ì„±í•  ìˆ˜ ìˆê³  ê°€ë…ì„±ì´ ì¢‹ë‹¤. (ì¸ìˆ˜ í…ŒìŠ¤íŠ¸ì—ì„œ ì‚¬ìš©í•˜ê¸° ì ì ˆí•¨)

- json data ë¥¼ ì‰½ê³  í¸í•˜ê²Œ ê²€ì¦í•  ìˆ˜ ìˆë‹¤.

```java
    @DisplayName("ë…¸ì„  ìˆ˜ì • - ì‹¤íŒ¨(ë³€ê²½í•˜ë ¤ëŠ” ë…¸ì„  ì´ë¦„ ì¤‘ë³µ)")
    @Test
    void updateLine_duplicatedName() {
        // given
        String uri = ë…¸ì„ _ìƒì„±("ì‹ ë¶„ë‹¹ì„ ", "bg-red-600").extract().header("Location");
        ë…¸ì„ _ìƒì„±("êµ¬ë¶„ë‹¹ì„ ", "bg-blue-600");
        LineRequest lineRequest = new LineRequest("êµ¬ë¶„ë‹¹ì„ ", "bg-blue-600");

        // when and then
        RestAssured.given().log().all()
                .body(lineRequest)
                .contentType(ContentType.JSON)
                .when()
                .put(uri)
                .then().log().all()
                .statusCode(HttpStatus.BAD_REQUEST.value())
                .body(equalTo("ì´ë¯¸ ë“±ë¡ë˜ì–´ ìˆëŠ” ë…¸ì„  ì´ë¦„ì…ë‹ˆë‹¤."));
    }
```

### ë§í¬

- [MockMvc vs RestAssured](https://dundung.tistory.com/229)

  

## [TDD] Mockmvc - 5

### ë‚´ìš©

- ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì„œë²„ì— ë°°í¬í•˜ì§€ ì•Šê³ ë„ ìŠ¤í”„ë§ MVC ë™ì‘ì„ ì¬í˜„í•  ìˆ˜ ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬
- ì£¼ë¡œ Controller Layer Unit Test (ë‹¨ìœ„ í…ŒìŠ¤íŠ¸)ì— ì‚¬ìš©ëœë‹¤.
- @SpringBootTest ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  @WebMvcTest ë¥¼ í†µí•´ Presentation Layer Bean ë§Œ ë¶ˆëŸ¬ì˜¨ë‹¤.
- ê·¸ ì™¸ Bean ì€ Mock ê°ì²´ ì„¤ì •ì„ í•´ì¤˜ì„œ ìˆœìˆ˜í•œ Controller ë¡œì§ì„ í…ŒìŠ¤íŠ¸ í•œë‹¤.

```java
    @Test
    @DisplayName("ë…¸ì„  ìƒì„± - ì‹¤íŒ¨(ë…¸ì„  ì¤‘ë³µ ì´ë¦„)")
    void createLine_duplicatedName() throws Exception {
        // given
        lineDao.save(Line.of("1í˜¸ì„ ", "bg-red-600"));

        Long upStationId = stationDao.save(Station.from("ì ì‹¤ì—­")).getId();
        Long downStationId = stationDao.save(Station.from("ì„ì´Œì—­")).getId();

        final LineRequest lineRequest =
                new LineRequest("1í˜¸ì„ ", "bg-green-600", upStationId, downStationId, 10);

        // when
        ResultActions result = ë…¸ì„ _ìƒì„±(lineRequest);

        // then
        result.andDo(print())
                .andExpect(status().isBadRequest())
                .andExpect(content().string("ì¤‘ë³µë˜ëŠ” ë¼ì¸ ì •ë³´ê°€ ì¡´ì¬í•©ë‹ˆë‹¤."));
    }
```

### ë§í¬

- [MockMvc vs RestAssured](https://dundung.tistory.com/229)



## [Spring] @ExceptionHandler & @ControllerAdvice - 4

### ë‚´ìš©

<b>ExceptionHandler</b>

- @Controller, @RestController ê°€ ì ìš©ëœ Bean ë‚´ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ë¥¼ ì¡ì•„ì„œ í•˜ë‚˜ì˜ ë©”ì„œë“œì—ì„œ ì²˜ë¦¬í•´ì£¼ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.

  ```java
      @ExceptionHandler({SubwayException.class //, OtherException.class})
      public ResponseEntity<String> handleBadRequest(Exception e) {
          return ResponseEntity.badRequest().body(e.getMessage());
      }
  ```

- ìœ„ì™€ ê°™ì´ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©° ì• ë„ˆí…Œì´ì…˜ì— ì—¬ëŸ¬ ì˜ˆì™¸ í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.

<b>ControllerAdvice</b>

- @ExceptionHandler ê°€ í•˜ë‚˜ì˜ í´ë˜ìŠ¤ì— ëŒ€í•œ ê²ƒì´ë¼ë©´, @ControllerAdvice ëŠ” ì „ì—­ì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì˜ˆì™¸ë¥¼ ì¡ì•„ì„œ ì²˜ë¦¬í•´ì¤€ë‹¤.

  ```java
  @RestControllerAdvice
  public class SubwayAdvice {
  
      @ExceptionHandler({SubwayException.class})
      public ResponseEntity<String> handleBadRequest(Exception e) {
          return ResponseEntity.badRequest().body(e.getMessage());
      }
  
      @ExceptionHandler({SubwayNotFoundException.class})
      public ResponseEntity<String> handleNotFound(Exception e) {
          return ResponseEntity.status(HttpStatus.NOT_FOUND).body(e.getMessage());
      }
  }
  ```

- ì—¬ëŸ¬ ì˜ˆì™¸ í´ë˜ìŠ¤ê°€ ì¶”ê°€ë˜ë©´ ê°€ë…ì„±ì´ ë–¨ì–´ì§€ë¯€ë¡œ ê°™ì€ ì˜ˆì™¸ì— ëŒ€í•´ì„œëŠ” ìƒì†ì²˜ë¦¬ë¥¼ í•˜ì—¬ ì˜ˆì™¸ ì²˜ë¦¬ì— ëŒ€í•œ ê°€ë…ì„±ì„ í–¥ìƒ¹ì‹œì¼°ë‹¤.

### ë§í¬

- [@ControllerAdvice, @ExceptionHandlerë¥¼ ì´ìš©í•œ ì˜ˆì™¸ì²˜ë¦¬ ë¶„ë¦¬, í†µí•©í•˜ê¸°(Springì—ì„œ ì˜ˆì™¸ ê´€ë¦¬í•˜ëŠ” ë°©ë²•, ì‹¤ë¬´ì—ì„œëŠ” ì–´ë–»ê²Œ?)](https://jeong-pro.tistory.com/195)

## [JAVA] PojoBean & Bean - 2

### ë‚´ìš©

<b>POJO Classes</b>

- ìë°” ê°ì²´ì˜ í‘œì¤€ì´ë©°, Java Language Specification ì— ì˜í•œ ì–´ë–¤ íŠ¹ì •í•œ ì—„ê²©í•œ(restriction) ê²½ê³„ê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤.

- <b>ê°€ë…ì„±</b>ê³¼ <b>ì¬ì‚¬ìš©ì„±</b>ì„ ì¤‘ìš”ì‹œí•˜ê²Œ ì‚¬ìš©ëœë‹¤.

- POJO ì˜ 3ê°€ì§€ ê·œì¹™

  > 1. Extend prespecified classes
  > 2. Implement respecified interfaces
  > 3. Contain prespecified annotations

<b>Beans Classes</b>

- POJO ì™€ ë‹¬ë¦¬ ì—„ê²©í•œ ê·œì¹™ì„ ê°€ì§€ê³  ìˆë‹¤.
- ëª¨ë“  JavaBeans ëŠ” POJOs ì§€ë§Œ POJOs ëŠ” JavaBeans ê°€ ì•„ë‹ˆë‹¤.
- ëª¨ë“  í•„ë“œì˜ ì ‘ê·¼ì œì–´ìëŠ” private ì´ì–´ì•¼ í•œë‹¤.
- ëª¨ë“  í•„ë“œëŠ” getter, setter ë¥¼ ê°€ì ¸ì•¼ í•˜ê³  getter, setter ë¡œë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.
- ê¸°ë³¸ ìƒì„±ìë§Œ ìˆì–´ì•¼ í•œë‹¤.

### ë§í¬

- [[Java] POJO ì™€ Beans ì˜ ì°¨ì´ì ](https://sanghye.tistory.com/13)



## [ORM] ê°ì²´ ê´€ê³„ ë§¤í•‘ (Object Relational Mapping) - 4

### ë‚´ìš©

<b>Object Modeling</b>

- OOP ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ëœ ì‹œìŠ¤í…œì„ í‘œí˜„í•œë‹¤.

<b>Relational Modeling</b>

- ì„œìˆ ì–´ì™€ ë¹„ìŠ·í•œ truth statement ë¡œ ì •ë³´ë¥¼ í‘œí˜„í•œë‹¤.

<b>ORM ì´ë€?</b>

- ê°ì²´ì™€ ê´€ê³„ë¥¼ ì—°ê²°í•´ ì£¼ëŠ” ê°œë…ì´ë‹¤.
- ORM ì„ ì´ìš©í•œ ê°œë°œì€ ê°ì²´ì™€ ë°ì´í„°ë² ì´ìŠ¤ì˜ ë³€í˜•ì— ìœ ì—°í•˜ê²Œ ëŒ€ì²˜í•  ìˆ˜ ìˆë„ë¡ í•´ì¤€ë‹¤.
- ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì— ì œì•½ì„ ìµœëŒ€í•œ ë°›ì§€ ì•Šìœ¼ë©´ì„œ ê°ì²´ë¥¼ í´ë˜ìŠ¤ë¡œ í‘œí˜„í•˜ëŠ” ê²ƒê³¼ ê°™ì´ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ê°ì²´ì²˜ëŸ¼ ì‰½ê²Œ í‘œí˜„ ë˜ëŠ” ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.

### ë§í¬

- [[ORM] ORMì´ë€?](https://m.blog.naver.com/PostView.nhn?blogId=ljc8808&logNo=220461868128&proxyReferer=https:%2F%2Fwww.google.com%2F)
- [[DB] ORMì´ë€](https://gmlwjd9405.github.io/2019/02/01/orm.html)



## [Srping] MediaType & ContentType - 2

### ë‚´ìš©

- í…ŒìŠ¤íŠ¸ì—ì„œ body ì˜ íƒ€ì…ì„ ì§€ì •í•´ì£¼ëŠ” ë¶€ë¶„ì—ì„œ ê¶ê¸ˆì¦ì´ ìƒê²¼ì—ˆë‹¤.

  ```java
  RestAssured.given().log().all()
                  .body(params)
                  .contentType(MediaType.APPLICATION_JSON_VALUE) // 1
                  
  ExtractableResponse<Response> response = RestAssured.given().log().all()
                  .body(params)
                  .contentType(ContentType.JSON) // 2
  ```

<b>MediaType</b>

- Request ì™€ Response ì—ì„œ ìš”ì²­ì„ ì£¼ê³  ë°›ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” MediaType ì„ ì§€ì •í•˜ì—¬ ì´ì™¸ì˜  ê°’ì„ ê±°ë¥¼ ìˆ˜ ìˆë‹¤.

  >This method can be used to parse an Accept or Content-Type header.
  >
  >ì´ ë©”ì„œë“œëŠ” Accept ë˜ëŠ” Content-Type í—¤ë”ë¥¼ êµ¬ë¬¸ ë¶„ì„í•˜ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

<b>ContentType</b>

- ëª…ì‹œí•œ íƒ€ì…ìœ¼ë¡œ ë³´ë‚¸ë‹¤ëŠ” ëœ»ì´ë‹¤.

  > This may be used to specify a request or response.
  >
  > ìš”ì²­ ë˜ëŠ” ì‘ë‹µì„ ì§€ì •í•˜ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

- ëª…ì‹œí•œ íƒ€ì…ìœ¼ë¡œ ë°›ì„ ë•ŒëŠ” Accept ë¥¼ ì‚¬ìš©í•œë‹¤.

### ë§í¬

- [Springì—ì„œì˜ MediaType](https://pozafly.github.io/spring/MediaType/)
- [What's the difference between mediatype, contenttype and mimetypes?](https://stackoverflow.com/questions/9258108/whats-the-difference-between-mediatype-contenttype-and-mimetype/9277778#9277778)



## [REST] REST API (Representational State Transfer) - 4

### ë‚´ìš©

- ìì›ì˜ ì´ë¦„ìœ¼ë¡œ êµ¬ë¶„í•˜ì—¬ í•´ë‹¹ ìì›ì˜ ìƒíƒœ(ì •ë³´)ë¥¼ ì£¼ê³  ë°›ëŠ” ëª¨ë“  ê²ƒì„ ì˜ë¯¸í•œë‹¤.

- ìì›(resource)ì˜ í‘œí˜„(representation)ì— ì˜í•œ ìƒíƒœ ì „ë‹¬

- Restful í•˜ê²Œ URI ë¥¼ ëª…ì‹œí•œë‹¤ëŠ” ê²ƒì„ ì œì´ìŠ¨ì€ ì´ë ‡ê²Œ ë§í–ˆë‹¤.

  >ì´ëŸ¬í•œ ìš”ì²­ì„ í•˜ë©´ ì–´ë– í•œ ì‘ë‹µì´ ì˜¤ê² ë‹¤.

- ì¦‰, ì˜ˆìƒí•œ ì´ë¦„ìœ¼ë¡œ ì •ë³´ë¥¼ ìš”ì²­í•˜ë©´ ì˜ˆìƒí•œ ê²°ê³¼ê°€ ë‚˜ì˜¤ê²Œë” ë§Œë“œëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤ê³  ìƒê°í•˜ë©´ ëœë‹¤.

  ```java
  @PostMapping("/lines") // ë…¸ì„ ì—ì„œ Body ì— ë…¸ì„  ì •ë³´ë¥¼ ë‹´ì•„ì„œ PostMapping ì„ í•˜ë©´ ì¶”ê°€í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.
  @GetMapping("/lines/{lineId}") // ë…¸ì„ ì—ì„œ ì•„ì´ë””ë¥¼ ì£¼ê³  GetMapping ì„ í•˜ë©´ ì¡°íšŒë¥¼ í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.
  @PutMapping("/lines/{lineId}") // ë…¸ì„ ì—ì„œ ì•„ì´ë””ë¥¼ ì£¼ê³  PutMapping ì„ í•˜ë©´ ìˆ˜ì •í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.
  @DeleteMapping("/lines/{lineId}") // ë…¸ì„ ì—ì„œ ì•„ì´ë””ë¥¼ ì£¼ê³  DeleteMapping ì„ í•˜ë©´ ì‚­ì œí•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.
  ```

### ë§í¬

- [[Network] RESTë€? REST APIë€? RESTfulì´ë€?](https://gmlwjd9405.github.io/2018/09/21/rest-and-restful.html)



## [Design Pattern] IoC & DI - 4

### ë‚´ìš©

<b>IoC(Inversion of Control)</b>

- GoF ë””ìì¸ íŒ¨í„´ì—ì„œ ìœ ë˜ëœ ê²ƒì´ë‹¤.
- EJB ì—ì„œ WAS Servlet Container ì—ì„œë„ ì‚¬ìš©ëœ ê°œë…ì´ë‹¤.
- ê°œë°œìê°€ ì§ì ‘ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ @Autowired ë¥¼ í†µí•´ Spring Container ì—ì„œ ì§ì ‘(ì œì–´) ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ í•´ë‹¹ ê°ì²´ì— ì£¼ì…í•´ì£¼ëŠ” ê²ƒì´ë‹¤.
- ìœ„ì™€ ê°™ì€ ìƒí™©ì—ì„œ ì œì–´ê°€ ì—­ì „ë˜ì—ˆë‹¤ê³  ë§í•œë‹¤.
- ì—­í• ê³¼ ì±…ì„ì˜ ë¶„ë¦¬ë¥¼ í•  ìˆ˜ ìˆë‹¤.
- ê°ì²´ ìƒëª… ê´€ë¦¬, íë¦„ ì œì–´ë¥¼ ì œ 3ìì—ê²Œ ìœ„í•¨í•˜ëŠ” í”„ë¡œê·¸ë˜ë° ëª¨ë¸ì´ë‹¤.

<b>ì˜ì¡´ì„± ì£¼ì…(Dependency Injection)</b>

- ì–´ë–¤ ê°ì²´ê°€ ì‚¬ìš©í•˜ëŠ” ì˜ì¡´ ê°ì²´ë¥¼ ì§ì ‘ ë§Œë“¤ì–´ ì‚¬ìš©í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ ì£¼ì… ë°›ì•„ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤.

  ```java
  // new ì—°ì‚°ìë¥¼ ì‚¬ìš©í•˜ì—¬ ì§ì ‘ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.
  class LineService {
  	private final LineDao lineDao;
  	
  	public LineService(LineDao lineDao) {
  		this.lineDao = lineDao;
  	}
  }
  
  // Line ì´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ê´€ë¦¬ë˜ê³  ìˆëŠ” Bean ì¼ ê²½ìš° @Autowired ë¥¼ í†µí•´ ê°ì²´ë¥¼ ì£¼ì… ë°›ì„ ìˆ˜ ìˆë‹¤.
  class LineService {
    @Autowired
  	private final LineDao lineDao;
  }
  ```

- ì¥ì 

  - ì¬ì‚¬ìš©ì„± ì¦ê°€
  - í…ŒìŠ¤íŠ¸ì— ìš©ì´
  - ì½”ë“œ ë‹¨ìˆœí™”
  - ì½”ë“œ ê°€ë…ì„± ì¦ê°€
  - ì¢…ì†ì„± ê°ì†
  - ê²°í•©ë„ëŠ” ë‚®ì¶”ê³  ì‘ì§‘ë„ëŠ” ë†’ì„
  - ê°ì²´ê°„ì˜ ì˜ì¡´ê´€ê³„ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŒ

- ë‹¨ìˆœí•œ ì œì–´ì˜ ì—­ì „, ê°ì²´ë¥¼ ì£¼ì…í•˜ì—¬ ìœ ì—°í•œ í”„ë¡œê·¸ë˜ë°ì„ í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” íŒ¨í„´ì— ë” ëª…í™•í•œ ì´ë¦„ì„ ë¶€ì—¬í•˜ê¸° ìœ„í•´ DI ë¼ëŠ” ìš©ì–´ë¥¼ ë§Œë“¤ì—ˆë‹¤.

### ë§í¬

- [DI(dependency Injection)](https://velog.io/@woo00oo/DIdependency-Injection)
- [ìŠ¤í”„ë§5 DI](https://lns13301.github.io/github-blog/spring5-chapter3/)
- [ì˜ì¡´ì„± ë¶„ë¦¬ì— ëŒ€í•œ SOLID ê´€ì ì—ì„œì˜ ì¥ì ](https://lns13301.github.io/github-blog/solid/)
- [IoC, DIë€ ë¬´ì—‡ì¼ê¹Œ?](https://biggwang.github.io/2019/08/31/Spring/IoC,%20DI%EB%9E%80%20%EB%AC%B4%EC%97%87%EC%9D%BC%EA%B9%8C/)



## [Java] Reflection - 2

### ë‚´ìš©

- ê°ì²´ë¥¼ í†µí•´ í´ë˜ìŠ¤ì˜ ì •ë³´ë¥¼ ë¶„ì„í•´ ë‚´ëŠ” í”„ë¡œê·¸ë¨ ê¸°ë²•ì„ ë§í•œë‹¤.

- BeanFactory ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰í•œ í›„ ê°ì²´ê°€ í˜¸ì¶œ ë  ë‹¹ì‹œ ê°ì²´ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•œë‹¤.

- ê·¸ ë•Œ í•„ìš”í•œ ê¸°ìˆ ì´ Reflection ì´ë‹¤.

- ìë°”ëŠ” ë™ì ìœ¼ë¡œ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ê¸°ìˆ ì´ ì—†ì—ˆê¸° ë•Œë¬¸ì— ë™ì ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” Reflection ìœ¼ë¡œ ê·¸ ì—­í• ì„ ëŒ€ì‹ í•œë‹¤.

- ì¦‰, ë˜ë‹¤ë¥¸ í´ë˜ìŠ¤ë¥¼ ë™ì ë¡œë”© í•˜ì—¬ ìƒì„±ì, ë©¤ë²„ ë¹Œë“œ, ë©¤ë²„ ë©”ì„œë“œ ë“±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.

- ë¯¸ì…˜ì— ì œê³µëœ Reflection ì˜ˆì‹œ

  ```java
      private Station createNewObject(Station station) {
          Field field = ReflectionUtils.findField(Station.class, "id");
          field.setAccessible(true);
          ReflectionUtils.setField(field, station, ++seq);
          return station;
      }
  ```

### ë§í¬

- [Java Reflection ê°œë… ë° ì‚¬ìš©ë²•](https://gyrfalcon.tistory.com/entry/Java-Reflection)
- [ìë°” ë¦¬í”Œë ‰ì…˜(Java Reflection)ê³¼ ë™ì  ë¡œë”©](https://madplay.github.io/post/java-reflection)